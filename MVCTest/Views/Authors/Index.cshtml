@model IEnumerable<MVCTest.Models.Author>
@using MVCTest.Models;
@using MVCTest.Extensions

@{
    ViewBag.Title = "Authors";
    var queryOptions = (QueryOptions)ViewBag.QueryOptions;
}


<div class="body-content col-md-8 col-md-offset-2">

    <h2>Authors</h2>
<p>
    @Html.ActionLink("Create New", "Create")
</p>

    <table class="table table-bordered table-striped">
        <tr>
            <th>@Html.BuildSortLink("Name", "Index", "name", queryOptions)</th>
            <th>@Html.BuildSortLink("Publisher", "Index", "publiser", queryOptions)</th>
            <th>Actions</th>
        </tr>
        <tbody data-bind="foreach:authors">
            <tr>
                <td data-bind="text:name"></td>
                <td data-bind="text:publisher"></td>
                <td>
                    <a data-bind="attr: {href: '@Url.Action("Details")/' + id}"
                    class="btn btn-info">Details</a>
                    <a data-bind="attr: {href: '@Url.Action("Edit")/' + id}"
                    class="btn btn-info">Edit</a>
                    @*<a data-bind="click:$parent.AjaxDelete.bind($root,$data.id)"
                        class="btn btn-info">Delete</a>*@
                    <a data-bind="click:$parent.showDeleteModal,attr: {href: '@Url.Action("Delete")/' + id}"
                        class="btn btn-info">Delete</a>
                </td>
            </tr>
        </tbody>
    </table>

    @Html.BuildPreNextLinks(queryOptions, "Index")
    <form hidden="hidden">@Html.AntiForgeryToken()</form>

</div>

@section Scripts
{
    @Scripts.Render("/Scripts/ViewModel/AuthorIndexViewModel.js")
    <script>
        var viewModel = new AuthorIndexViewModel(@Html.HtmlConvertToJson(Model));
        ko.applyBindings(viewModel);
    </script>
}
